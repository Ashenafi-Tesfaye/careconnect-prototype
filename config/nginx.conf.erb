worker_processes 1;
daemon off;
error_log stderr;
pid /tmp/nginx.pid;

events {
  worker_connections 1024;
}

http {
  include       mime.types;
  default_type  application/octet-stream;
  sendfile      on;

  server {
    # listen on the env PORT (Heroku sets this for us)
    listen <%= ENV.fetch("PORT") { 5000 } %>;
    # serve files out of the build directory (your app root)
    root   <%= ENV["BUILD_DIR"] %>;

    # try URI, then fallback to index.html (single-page routing)
    location / {
      try_files $uri /index.html;
    }
  }
}
